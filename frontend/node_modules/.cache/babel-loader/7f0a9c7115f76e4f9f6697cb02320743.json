{"ast":null,"code":"var _jsxFileName = \"/Users/doviethoang/Desktop/github/dynonary-english/frontend/src/components/ForgotPassword/index.js\",\n    _s = $RefreshSig$();\n\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport Button from '@material-ui/core/Button';\nimport LockIcon from '@material-ui/icons/Lock';\nimport LoopIcon from '@material-ui/icons/Loop';\nimport VisibilityIcon from '@material-ui/icons/Visibility';\nimport VisibilityOffIcon from '@material-ui/icons/VisibilityOff';\nimport makeStyles from '@material-ui/styles/makeStyles';\nimport InputCustom from 'components/UI/InputCustom';\nimport { formStyle } from 'components/UI/style';\nimport { MAX, MIN } from 'constant';\nimport PropTypes from 'prop-types';\nimport React, { useState } from 'react';\nimport { useForm } from 'react-hook-form';\nimport { useDispatch } from 'react-redux';\nimport { setMessage } from 'redux/slices/message.slice';\nimport * as yup from 'yup';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst schema = yup.object().shape({\n  email: yup.string().trim().required('Nhập email').email('Email không hợp lệ').max(MAX.EMAIL_LEN, `Email tối đa ${MAX.EMAIL_LEN}`),\n  verifyCode: yup.string().trim().required('Nhập mã xác thực').length(MAX.VERIFY_CODE, `Mã xác thực có ${MAX.VERIFY_CODE} chữ số`).matches(new RegExp(`\\\\d{${MAX.VERIFY_CODE}}`), `Mã xác thực là số có ${MAX.VERIFY_CODE} chữ số`),\n  password: yup.string().trim().required('Nhập mật khẩu').min(MIN.PASSWORD_LEN, `Mật khẩu ít nhất ${MIN.PASSWORD_LEN} ký tự`).max(MAX.PASSWORD_LEN, `Mật khẩu tối đa ${MAX.PASSWORD_LEN}`),\n  confirmPw: yup.string().trim().required('Xác nhận lại mật khẩu').oneOf([yup.ref('password'), null], 'Mật khẩu không khớp')\n});\n\nfunction ForgotPassword(_ref) {\n  _s();\n\n  var _errors$email, _errors$verifyCode, _errors$password, _errors$confirmPw;\n\n  let {\n    onSubmit,\n    loading,\n    mailSending,\n    onSendVerifyCode\n  } = _ref;\n  const classes = makeStyles(formStyle())();\n  const [visiblePw, setVisiblePw] = useState(false);\n  const {\n    register,\n    handleSubmit,\n    formState: {\n      errors\n    },\n    getValues\n  } = useForm({\n    resolver: yupResolver(schema)\n  });\n  const dispatch = useDispatch();\n\n  const handleSendCode = async () => {\n    const email = getValues('email');\n    const regex = /^(([^<>()[\\]\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})$/i;\n\n    if (!regex.test(email.toLowerCase())) {\n      dispatch(setMessage({\n        type: 'error',\n        message: 'Email không hợp lệ'\n      }));\n      return;\n    }\n\n    onSendVerifyCode(email);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    className: `${classes.root} flex-col`,\n    onSubmit: handleSubmit(onSubmit),\n    autoComplete: \"off\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex-col\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: `${classes.title} t-center`,\n        children: \"L\\u1EA5y l\\u1EA1i m\\u1EADt kh\\u1EA9u\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"t-center mt-5\",\n        children: /*#__PURE__*/_jsxDEV(LockIcon, {\n          className: classes.labelIcon\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex-col\",\n      children: [/*#__PURE__*/_jsxDEV(InputCustom, {\n        label: \"Email\",\n        size: \"small\",\n        placeholder: \"Nh\\u1EADp email\",\n        error: Boolean(errors.email),\n        inputProps: {\n          name: 'email',\n          maxLength: MAX.EMAIL_LEN,\n          autoFocus: true,\n          ...register('email')\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 9\n      }, this), errors.email && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-error\",\n        children: (_errors$email = errors.email) === null || _errors$email === void 0 ? void 0 : _errors$email.message\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 26\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex-col\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-flex\",\n        children: [/*#__PURE__*/_jsxDEV(InputCustom, {\n          className: \"w-50\",\n          label: \"M\\xE3 x\\xE1c nh\\u1EADn\",\n          size: \"small\",\n          placeholder: \"X X X X X X\",\n          error: Boolean(errors.verifyCode),\n          inputProps: {\n            name: 'verifyCode',\n            maxLength: MAX.VERIFY_CODE,\n            ...register('verifyCode')\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          className: \"_btn _btn-stand w-50\",\n          disabled: mailSending,\n          endIcon: mailSending && /*#__PURE__*/_jsxDEV(LoopIcon, {\n            className: \"ani-spin\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 124,\n            columnNumber: 37\n          }, this),\n          onClick: handleSendCode,\n          children: \"G\\u1EEDi m\\xE3\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 9\n      }, this), errors.verifyCode && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-error\",\n        children: (_errors$verifyCode = errors.verifyCode) === null || _errors$verifyCode === void 0 ? void 0 : _errors$verifyCode.message\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex-col\",\n      children: [/*#__PURE__*/_jsxDEV(InputCustom, {\n        label: \"M\\u1EADt kh\\u1EA9u\",\n        size: \"small\",\n        placeholder: \"Nh\\u1EADp m\\u1EADt kh\\u1EA9u\",\n        error: Boolean(errors.password),\n        inputProps: {\n          name: 'password',\n          maxLength: MAX.PASSWORD_LEN,\n          type: visiblePw ? 'text' : 'password',\n          ...register('password')\n        },\n        endAdornment: visiblePw ? /*#__PURE__*/_jsxDEV(VisibilityIcon, {\n          className: `${classes.icon} ${classes.visiblePw}`,\n          onClick: () => setVisiblePw(false)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 15\n        }, this) : /*#__PURE__*/_jsxDEV(VisibilityOffIcon, {\n          className: classes.icon,\n          onClick: () => setVisiblePw(true)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 9\n      }, this), errors.password && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-error\",\n        children: (_errors$password = errors.password) === null || _errors$password === void 0 ? void 0 : _errors$password.message\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex-col\",\n      children: [/*#__PURE__*/_jsxDEV(InputCustom, {\n        label: \"X\\xE1c nh\\u1EADn m\\u1EADt kh\\u1EA9u\",\n        size: \"small\",\n        placeholder: \"Nh\\u1EADp l\\u1EA1i m\\u1EADt kh\\u1EA9u\",\n        error: Boolean(errors.confirmPw),\n        inputProps: {\n          name: 'confirmPw',\n          maxLength: MAX.PASSWORD_LEN,\n          type: visiblePw ? 'text' : 'password',\n          ...register('confirmPw')\n        },\n        endAdornment: visiblePw ? /*#__PURE__*/_jsxDEV(VisibilityIcon, {\n          className: `${classes.icon} ${classes.visiblePw}`,\n          onClick: () => setVisiblePw(false)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 15\n        }, this) : /*#__PURE__*/_jsxDEV(VisibilityOffIcon, {\n          className: classes.icon,\n          onClick: () => setVisiblePw(true)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 9\n      }, this), errors.confirmPw && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-error\",\n        children: (_errors$confirmPw = errors.confirmPw) === null || _errors$confirmPw === void 0 ? void 0 : _errors$confirmPw.message\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      className: \"_btn _btn-primary\",\n      type: \"submit\",\n      variant: \"contained\",\n      color: \"primary\",\n      disabled: loading,\n      endIcon: loading && /*#__PURE__*/_jsxDEV(LoopIcon, {\n        className: \"ani-spin\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 29\n      }, this),\n      size: \"large\",\n      children: \"\\u0110\\u1ED5i m\\u1EADt kh\\u1EA9u\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 80,\n    columnNumber: 5\n  }, this);\n}\n\n_s(ForgotPassword, \"VK8W55UtmXUsjJ3/1EeA2Prqx7Y=\", false, function () {\n  return [useForm, useDispatch];\n});\n\n_c = ForgotPassword;\nForgotPassword.propTypes = {\n  loading: PropTypes.bool,\n  mailSending: PropTypes.bool,\n  onSendVerifyCode: PropTypes.func,\n  onSubmit: PropTypes.func\n};\nexport default ForgotPassword;\n\nvar _c;\n\n$RefreshReg$(_c, \"ForgotPassword\");","map":{"version":3,"sources":["/Users/doviethoang/Desktop/github/dynonary-english/frontend/src/components/ForgotPassword/index.js"],"names":["yupResolver","Button","LockIcon","LoopIcon","VisibilityIcon","VisibilityOffIcon","makeStyles","InputCustom","formStyle","MAX","MIN","PropTypes","React","useState","useForm","useDispatch","setMessage","yup","schema","object","shape","email","string","trim","required","max","EMAIL_LEN","verifyCode","length","VERIFY_CODE","matches","RegExp","password","min","PASSWORD_LEN","confirmPw","oneOf","ref","ForgotPassword","onSubmit","loading","mailSending","onSendVerifyCode","classes","visiblePw","setVisiblePw","register","handleSubmit","formState","errors","getValues","resolver","dispatch","handleSendCode","regex","test","toLowerCase","type","message","root","title","labelIcon","Boolean","name","maxLength","autoFocus","icon","propTypes","bool","func"],"mappings":";;;AAAA,SAASA,WAAT,QAA4B,yBAA5B;AACA,OAAOC,MAAP,MAAmB,0BAAnB;AACA,OAAOC,QAAP,MAAqB,yBAArB;AACA,OAAOC,QAAP,MAAqB,yBAArB;AACA,OAAOC,cAAP,MAA2B,+BAA3B;AACA,OAAOC,iBAAP,MAA8B,kCAA9B;AACA,OAAOC,UAAP,MAAuB,gCAAvB;AACA,OAAOC,WAAP,MAAwB,2BAAxB;AACA,SAASC,SAAT,QAA0B,qBAA1B;AACA,SAASC,GAAT,EAAcC,GAAd,QAAyB,UAAzB;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,OAAOC,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AACA,SAASC,OAAT,QAAwB,iBAAxB;AACA,SAASC,WAAT,QAA4B,aAA5B;AACA,SAASC,UAAT,QAA2B,4BAA3B;AACA,OAAO,KAAKC,GAAZ,MAAqB,KAArB;;AAEA,MAAMC,MAAM,GAAGD,GAAG,CAACE,MAAJ,GAAaC,KAAb,CAAmB;AAChCC,EAAAA,KAAK,EAAEJ,GAAG,CACPK,MADI,GAEJC,IAFI,GAGJC,QAHI,CAGK,YAHL,EAIJH,KAJI,CAIE,oBAJF,EAKJI,GALI,CAKAhB,GAAG,CAACiB,SALJ,EAKgB,gBAAejB,GAAG,CAACiB,SAAU,EAL7C,CADyB;AAOhCC,EAAAA,UAAU,EAAEV,GAAG,CACZK,MADS,GAETC,IAFS,GAGTC,QAHS,CAGA,kBAHA,EAITI,MAJS,CAIFnB,GAAG,CAACoB,WAJF,EAIgB,kBAAiBpB,GAAG,CAACoB,WAAY,SAJjD,EAKTC,OALS,CAMR,IAAIC,MAAJ,CAAY,OAAMtB,GAAG,CAACoB,WAAY,GAAlC,CANQ,EAOP,wBAAuBpB,GAAG,CAACoB,WAAY,SAPhC,CAPoB;AAgBhCG,EAAAA,QAAQ,EAAEf,GAAG,CACVK,MADO,GAEPC,IAFO,GAGPC,QAHO,CAGE,eAHF,EAIPS,GAJO,CAIHvB,GAAG,CAACwB,YAJD,EAIgB,oBAAmBxB,GAAG,CAACwB,YAAa,QAJpD,EAKPT,GALO,CAKHhB,GAAG,CAACyB,YALD,EAKgB,mBAAkBzB,GAAG,CAACyB,YAAa,EALnD,CAhBsB;AAsBhCC,EAAAA,SAAS,EAAElB,GAAG,CACXK,MADQ,GAERC,IAFQ,GAGRC,QAHQ,CAGC,uBAHD,EAIRY,KAJQ,CAIF,CAACnB,GAAG,CAACoB,GAAJ,CAAQ,UAAR,CAAD,EAAsB,IAAtB,CAJE,EAI2B,qBAJ3B;AAtBqB,CAAnB,CAAf;;AA6BA,SAASC,cAAT,OAA8E;AAAA;;AAAA;;AAAA,MAAtD;AAAEC,IAAAA,QAAF;AAAYC,IAAAA,OAAZ;AAAqBC,IAAAA,WAArB;AAAkCC,IAAAA;AAAlC,GAAsD;AAC5E,QAAMC,OAAO,GAAGrC,UAAU,CAACE,SAAS,EAAV,CAAV,EAAhB;AACA,QAAM,CAACoC,SAAD,EAAYC,YAAZ,IAA4BhC,QAAQ,CAAC,KAAD,CAA1C;AACA,QAAM;AACJiC,IAAAA,QADI;AAEJC,IAAAA,YAFI;AAGJC,IAAAA,SAAS,EAAE;AAAEC,MAAAA;AAAF,KAHP;AAIJC,IAAAA;AAJI,MAKFpC,OAAO,CAAC;AACVqC,IAAAA,QAAQ,EAAEnD,WAAW,CAACkB,MAAD;AADX,GAAD,CALX;AAQA,QAAMkC,QAAQ,GAAGrC,WAAW,EAA5B;;AAEA,QAAMsC,cAAc,GAAG,YAAY;AACjC,UAAMhC,KAAK,GAAG6B,SAAS,CAAC,OAAD,CAAvB;AAEA,UAAMI,KAAK,GACT,sHADF;;AAGA,QAAI,CAACA,KAAK,CAACC,IAAN,CAAWlC,KAAK,CAACmC,WAAN,EAAX,CAAL,EAAsC;AACpCJ,MAAAA,QAAQ,CACNpC,UAAU,CAAC;AACTyC,QAAAA,IAAI,EAAE,OADG;AAETC,QAAAA,OAAO,EAAE;AAFA,OAAD,CADJ,CAAR;AAMA;AACD;;AAEDhB,IAAAA,gBAAgB,CAACrB,KAAD,CAAhB;AACD,GAjBD;;AAmBA,sBACE;AACE,IAAA,SAAS,EAAG,GAAEsB,OAAO,CAACgB,IAAK,WAD7B;AAEE,IAAA,QAAQ,EAAEZ,YAAY,CAACR,QAAD,CAFxB;AAGE,IAAA,YAAY,EAAC,KAHf;AAAA,4BAIE;AAAK,MAAA,SAAS,EAAC,UAAf;AAAA,8BACE;AAAI,QAAA,SAAS,EAAG,GAAEI,OAAO,CAACiB,KAAM,WAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,eAEE;AAAK,QAAA,SAAS,EAAC,eAAf;AAAA,+BACE,QAAC,QAAD;AAAU,UAAA,SAAS,EAAEjB,OAAO,CAACkB;AAA7B;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,cAFF;AAAA;AAAA;AAAA;AAAA;AAAA,YAJF,eAWE;AAAK,MAAA,SAAS,EAAC,UAAf;AAAA,8BACE,QAAC,WAAD;AACE,QAAA,KAAK,EAAC,OADR;AAEE,QAAA,IAAI,EAAC,OAFP;AAGE,QAAA,WAAW,EAAC,iBAHd;AAIE,QAAA,KAAK,EAAEC,OAAO,CAACb,MAAM,CAAC5B,KAAR,CAJhB;AAKE,QAAA,UAAU,EAAE;AACV0C,UAAAA,IAAI,EAAE,OADI;AAEVC,UAAAA,SAAS,EAAEvD,GAAG,CAACiB,SAFL;AAGVuC,UAAAA,SAAS,EAAE,IAHD;AAIV,aAAGnB,QAAQ,CAAC,OAAD;AAJD;AALd;AAAA;AAAA;AAAA;AAAA,cADF,EAaGG,MAAM,CAAC5B,KAAP,iBAAgB;AAAG,QAAA,SAAS,EAAC,YAAb;AAAA,mCAA2B4B,MAAM,CAAC5B,KAAlC,kDAA2B,cAAcqC;AAAzC;AAAA;AAAA;AAAA;AAAA,cAbnB;AAAA;AAAA;AAAA;AAAA;AAAA,YAXF,eA2BE;AAAK,MAAA,SAAS,EAAC,UAAf;AAAA,8BACE;AAAK,QAAA,SAAS,EAAC,QAAf;AAAA,gCACE,QAAC,WAAD;AACE,UAAA,SAAS,EAAC,MADZ;AAEE,UAAA,KAAK,EAAC,wBAFR;AAGE,UAAA,IAAI,EAAC,OAHP;AAIE,UAAA,WAAW,EAAC,aAJd;AAKE,UAAA,KAAK,EAAEI,OAAO,CAACb,MAAM,CAACtB,UAAR,CALhB;AAME,UAAA,UAAU,EAAE;AACVoC,YAAAA,IAAI,EAAE,YADI;AAEVC,YAAAA,SAAS,EAAEvD,GAAG,CAACoB,WAFL;AAGV,eAAGiB,QAAQ,CAAC,YAAD;AAHD;AANd;AAAA;AAAA;AAAA;AAAA,gBADF,eAaE,QAAC,MAAD;AACE,UAAA,SAAS,EAAC,sBADZ;AAEE,UAAA,QAAQ,EAAEL,WAFZ;AAGE,UAAA,OAAO,EAAEA,WAAW,iBAAI,QAAC,QAAD;AAAU,YAAA,SAAS,EAAC;AAApB;AAAA;AAAA;AAAA;AAAA,kBAH1B;AAIE,UAAA,OAAO,EAAEY,cAJX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAbF;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,EAsBGJ,MAAM,CAACtB,UAAP,iBACC;AAAG,QAAA,SAAS,EAAC,YAAb;AAAA,wCAA2BsB,MAAM,CAACtB,UAAlC,uDAA2B,mBAAmB+B;AAA9C;AAAA;AAAA;AAAA;AAAA,cAvBJ;AAAA;AAAA;AAAA;AAAA;AAAA,YA3BF,eAsDE;AAAK,MAAA,SAAS,EAAC,UAAf;AAAA,8BACE,QAAC,WAAD;AACE,QAAA,KAAK,EAAC,oBADR;AAEE,QAAA,IAAI,EAAC,OAFP;AAGE,QAAA,WAAW,EAAC,8BAHd;AAIE,QAAA,KAAK,EAAEI,OAAO,CAACb,MAAM,CAACjB,QAAR,CAJhB;AAKE,QAAA,UAAU,EAAE;AACV+B,UAAAA,IAAI,EAAE,UADI;AAEVC,UAAAA,SAAS,EAAEvD,GAAG,CAACyB,YAFL;AAGVuB,UAAAA,IAAI,EAAEb,SAAS,GAAG,MAAH,GAAY,UAHjB;AAIV,aAAGE,QAAQ,CAAC,UAAD;AAJD,SALd;AAWE,QAAA,YAAY,EACVF,SAAS,gBACP,QAAC,cAAD;AACE,UAAA,SAAS,EAAG,GAAED,OAAO,CAACuB,IAAK,IAAGvB,OAAO,CAACC,SAAU,EADlD;AAEE,UAAA,OAAO,EAAE,MAAMC,YAAY,CAAC,KAAD;AAF7B;AAAA;AAAA;AAAA;AAAA,gBADO,gBAMP,QAAC,iBAAD;AACE,UAAA,SAAS,EAAEF,OAAO,CAACuB,IADrB;AAEE,UAAA,OAAO,EAAE,MAAMrB,YAAY,CAAC,IAAD;AAF7B;AAAA;AAAA;AAAA;AAAA;AAlBN;AAAA;AAAA;AAAA;AAAA,cADF,EA0BGI,MAAM,CAACjB,QAAP,iBACC;AAAG,QAAA,SAAS,EAAC,YAAb;AAAA,sCAA2BiB,MAAM,CAACjB,QAAlC,qDAA2B,iBAAiB0B;AAA5C;AAAA;AAAA;AAAA;AAAA,cA3BJ;AAAA;AAAA;AAAA;AAAA;AAAA,YAtDF,eAqFE;AAAK,MAAA,SAAS,EAAC,UAAf;AAAA,8BACE,QAAC,WAAD;AACE,QAAA,KAAK,EAAC,qCADR;AAEE,QAAA,IAAI,EAAC,OAFP;AAGE,QAAA,WAAW,EAAC,uCAHd;AAIE,QAAA,KAAK,EAAEI,OAAO,CAACb,MAAM,CAACd,SAAR,CAJhB;AAKE,QAAA,UAAU,EAAE;AACV4B,UAAAA,IAAI,EAAE,WADI;AAEVC,UAAAA,SAAS,EAAEvD,GAAG,CAACyB,YAFL;AAGVuB,UAAAA,IAAI,EAAEb,SAAS,GAAG,MAAH,GAAY,UAHjB;AAIV,aAAGE,QAAQ,CAAC,WAAD;AAJD,SALd;AAWE,QAAA,YAAY,EACVF,SAAS,gBACP,QAAC,cAAD;AACE,UAAA,SAAS,EAAG,GAAED,OAAO,CAACuB,IAAK,IAAGvB,OAAO,CAACC,SAAU,EADlD;AAEE,UAAA,OAAO,EAAE,MAAMC,YAAY,CAAC,KAAD;AAF7B;AAAA;AAAA;AAAA;AAAA,gBADO,gBAMP,QAAC,iBAAD;AACE,UAAA,SAAS,EAAEF,OAAO,CAACuB,IADrB;AAEE,UAAA,OAAO,EAAE,MAAMrB,YAAY,CAAC,IAAD;AAF7B;AAAA;AAAA;AAAA;AAAA;AAlBN;AAAA;AAAA;AAAA;AAAA,cADF,EA0BGI,MAAM,CAACd,SAAP,iBACC;AAAG,QAAA,SAAS,EAAC,YAAb;AAAA,uCAA2Bc,MAAM,CAACd,SAAlC,sDAA2B,kBAAkBuB;AAA7C;AAAA;AAAA;AAAA;AAAA,cA3BJ;AAAA;AAAA;AAAA;AAAA;AAAA,YArFF,eAoHE,QAAC,MAAD;AACE,MAAA,SAAS,EAAC,mBADZ;AAEE,MAAA,IAAI,EAAC,QAFP;AAGE,MAAA,OAAO,EAAC,WAHV;AAIE,MAAA,KAAK,EAAC,SAJR;AAKE,MAAA,QAAQ,EAAElB,OALZ;AAME,MAAA,OAAO,EAAEA,OAAO,iBAAI,QAAC,QAAD;AAAU,QAAA,SAAS,EAAC;AAApB;AAAA;AAAA;AAAA;AAAA,cANtB;AAOE,MAAA,IAAI,EAAC,OAPP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YApHF;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;AAiID;;GAjKQF,c;UAQHxB,O,EAGaC,W;;;KAXVuB,c;AAmKTA,cAAc,CAAC6B,SAAf,GAA2B;AACzB3B,EAAAA,OAAO,EAAE7B,SAAS,CAACyD,IADM;AAEzB3B,EAAAA,WAAW,EAAE9B,SAAS,CAACyD,IAFE;AAGzB1B,EAAAA,gBAAgB,EAAE/B,SAAS,CAAC0D,IAHH;AAIzB9B,EAAAA,QAAQ,EAAE5B,SAAS,CAAC0D;AAJK,CAA3B;AAOA,eAAe/B,cAAf","sourcesContent":["import { yupResolver } from '@hookform/resolvers/yup';\nimport Button from '@material-ui/core/Button';\nimport LockIcon from '@material-ui/icons/Lock';\nimport LoopIcon from '@material-ui/icons/Loop';\nimport VisibilityIcon from '@material-ui/icons/Visibility';\nimport VisibilityOffIcon from '@material-ui/icons/VisibilityOff';\nimport makeStyles from '@material-ui/styles/makeStyles';\nimport InputCustom from 'components/UI/InputCustom';\nimport { formStyle } from 'components/UI/style';\nimport { MAX, MIN } from 'constant';\nimport PropTypes from 'prop-types';\nimport React, { useState } from 'react';\nimport { useForm } from 'react-hook-form';\nimport { useDispatch } from 'react-redux';\nimport { setMessage } from 'redux/slices/message.slice';\nimport * as yup from 'yup';\n\nconst schema = yup.object().shape({\n  email: yup\n    .string()\n    .trim()\n    .required('Nhập email')\n    .email('Email không hợp lệ')\n    .max(MAX.EMAIL_LEN, `Email tối đa ${MAX.EMAIL_LEN}`),\n  verifyCode: yup\n    .string()\n    .trim()\n    .required('Nhập mã xác thực')\n    .length(MAX.VERIFY_CODE, `Mã xác thực có ${MAX.VERIFY_CODE} chữ số`)\n    .matches(\n      new RegExp(`\\\\d{${MAX.VERIFY_CODE}}`),\n      `Mã xác thực là số có ${MAX.VERIFY_CODE} chữ số`,\n    ),\n  password: yup\n    .string()\n    .trim()\n    .required('Nhập mật khẩu')\n    .min(MIN.PASSWORD_LEN, `Mật khẩu ít nhất ${MIN.PASSWORD_LEN} ký tự`)\n    .max(MAX.PASSWORD_LEN, `Mật khẩu tối đa ${MAX.PASSWORD_LEN}`),\n  confirmPw: yup\n    .string()\n    .trim()\n    .required('Xác nhận lại mật khẩu')\n    .oneOf([yup.ref('password'), null], 'Mật khẩu không khớp'),\n});\n\nfunction ForgotPassword({ onSubmit, loading, mailSending, onSendVerifyCode }) {\n  const classes = makeStyles(formStyle())();\n  const [visiblePw, setVisiblePw] = useState(false);\n  const {\n    register,\n    handleSubmit,\n    formState: { errors },\n    getValues,\n  } = useForm({\n    resolver: yupResolver(schema),\n  });\n  const dispatch = useDispatch();\n\n  const handleSendCode = async () => {\n    const email = getValues('email');\n\n    const regex =\n      /^(([^<>()[\\]\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})$/i;\n\n    if (!regex.test(email.toLowerCase())) {\n      dispatch(\n        setMessage({\n          type: 'error',\n          message: 'Email không hợp lệ',\n        }),\n      );\n      return;\n    }\n\n    onSendVerifyCode(email);\n  };\n\n  return (\n    <form\n      className={`${classes.root} flex-col`}\n      onSubmit={handleSubmit(onSubmit)}\n      autoComplete=\"off\">\n      <div className=\"flex-col\">\n        <h1 className={`${classes.title} t-center`}>Lấy lại mật khẩu</h1>\n        <div className=\"t-center mt-5\">\n          <LockIcon className={classes.labelIcon} />\n        </div>\n      </div>\n\n      <div className=\"flex-col\">\n        <InputCustom\n          label=\"Email\"\n          size=\"small\"\n          placeholder=\"Nhập email\"\n          error={Boolean(errors.email)}\n          inputProps={{\n            name: 'email',\n            maxLength: MAX.EMAIL_LEN,\n            autoFocus: true,\n            ...register('email'),\n          }}\n        />\n        {errors.email && <p className=\"text-error\">{errors.email?.message}</p>}\n      </div>\n\n      <div className=\"flex-col\">\n        <div className=\"d-flex\">\n          <InputCustom\n            className=\"w-50\"\n            label=\"Mã xác nhận\"\n            size=\"small\"\n            placeholder=\"X X X X X X\"\n            error={Boolean(errors.verifyCode)}\n            inputProps={{\n              name: 'verifyCode',\n              maxLength: MAX.VERIFY_CODE,\n              ...register('verifyCode'),\n            }}\n          />\n          <Button\n            className=\"_btn _btn-stand w-50\"\n            disabled={mailSending}\n            endIcon={mailSending && <LoopIcon className=\"ani-spin\" />}\n            onClick={handleSendCode}>\n            Gửi mã\n          </Button>\n        </div>\n        {errors.verifyCode && (\n          <p className=\"text-error\">{errors.verifyCode?.message}</p>\n        )}\n      </div>\n\n      <div className=\"flex-col\">\n        <InputCustom\n          label=\"Mật khẩu\"\n          size=\"small\"\n          placeholder=\"Nhập mật khẩu\"\n          error={Boolean(errors.password)}\n          inputProps={{\n            name: 'password',\n            maxLength: MAX.PASSWORD_LEN,\n            type: visiblePw ? 'text' : 'password',\n            ...register('password'),\n          }}\n          endAdornment={\n            visiblePw ? (\n              <VisibilityIcon\n                className={`${classes.icon} ${classes.visiblePw}`}\n                onClick={() => setVisiblePw(false)}\n              />\n            ) : (\n              <VisibilityOffIcon\n                className={classes.icon}\n                onClick={() => setVisiblePw(true)}\n              />\n            )\n          }\n        />\n        {errors.password && (\n          <p className=\"text-error\">{errors.password?.message}</p>\n        )}\n      </div>\n\n      <div className=\"flex-col\">\n        <InputCustom\n          label=\"Xác nhận mật khẩu\"\n          size=\"small\"\n          placeholder=\"Nhập lại mật khẩu\"\n          error={Boolean(errors.confirmPw)}\n          inputProps={{\n            name: 'confirmPw',\n            maxLength: MAX.PASSWORD_LEN,\n            type: visiblePw ? 'text' : 'password',\n            ...register('confirmPw'),\n          }}\n          endAdornment={\n            visiblePw ? (\n              <VisibilityIcon\n                className={`${classes.icon} ${classes.visiblePw}`}\n                onClick={() => setVisiblePw(false)}\n              />\n            ) : (\n              <VisibilityOffIcon\n                className={classes.icon}\n                onClick={() => setVisiblePw(true)}\n              />\n            )\n          }\n        />\n        {errors.confirmPw && (\n          <p className=\"text-error\">{errors.confirmPw?.message}</p>\n        )}\n      </div>\n\n      <Button\n        className=\"_btn _btn-primary\"\n        type=\"submit\"\n        variant=\"contained\"\n        color=\"primary\"\n        disabled={loading}\n        endIcon={loading && <LoopIcon className=\"ani-spin\" />}\n        size=\"large\">\n        Đổi mật khẩu\n      </Button>\n    </form>\n  );\n}\n\nForgotPassword.propTypes = {\n  loading: PropTypes.bool,\n  mailSending: PropTypes.bool,\n  onSendVerifyCode: PropTypes.func,\n  onSubmit: PropTypes.func,\n};\n\nexport default ForgotPassword;\n"]},"metadata":{},"sourceType":"module"}